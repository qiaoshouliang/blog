<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)-->
    <script defer=true src="/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

    <!-- Canonical -->
    <link rel="canonical" href="http://localhost:4000/2017/11/13/git%E5%91%BD%E4%BB%A4.html">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="JOSEN's BLOG" href="http://localhost:4000///feed.xml"/>

    <!-- Font Awesome -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="/assets/css/vendor/font-awesome.min.css">

    <!-- Google Fonts -->
    
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,700italic,400italic" rel="stylesheet" type="text/css"> 
    

    <!-- KaTeX 0.8.3 -->
    
    <link rel="stylesheet" type="text/css" href="/assets/css/vendor/katex.min.css">
    <script src="/assets/js/vendor/katex.min.js">
    </script>
    

    <!-- Google Analytics -->
    
    
    <!-- seo tags -->
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Git命令 | JOSEN’s BLOG</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Git命令" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="我每天使用 Git ，但是很多命令记不住。" />
<meta property="og:description" content="我每天使用 Git ，但是很多命令记不住。" />
<link rel="canonical" href="http://localhost:4000/2017/11/13/git%E5%91%BD%E4%BB%A4.html" />
<meta property="og:url" content="http://localhost:4000/2017/11/13/git%E5%91%BD%E4%BB%A4.html" />
<meta property="og:site_name" content="JOSEN’s BLOG" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-11-13T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"我每天使用 Git ，但是很多命令记不住。","@type":"BlogPosting","url":"http://localhost:4000/2017/11/13/git%E5%91%BD%E4%BB%A4.html","headline":"Git命令","dateModified":"2017-11-13T00:00:00+08:00","datePublished":"2017-11-13T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2017/11/13/git%E5%91%BD%E4%BB%A4.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <!-- Manual seo tags -->
    <!--
    <title>Git命令 | JOSEN's BLOG</title>
    <meta name="description" content="我每天使用 Git ，但是很多命令记不住。">
    -->
</head>

  <body>
    <header class="site-header">
    
    <!-- Logo and title -->
	<div class="branding">
		<a href="/">
			<img class="avatar" src="/assets/img/triangle.png" alt=""/>
		</a>

		<h1 class="site-title">
			<a href="/">JOSEN's BLOG</a>
		</h1>
	</div>
    
    <!-- Toggle menu -->
    <nav class="clear">
    <a id="pull" class="toggle" href="#">
    <i class="fa fa-bars fa-lg"></i>
    </a>
    
    <!-- Menu -->
    <ul class="hide">
        <!-- Auto Generation of NORMAL pages in the navbar -->
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
         
        
        <!-- Auto Generation of SPECIAL pages in the navbar -->
        
          
            <li class="separator"> | </li>
            <li>
                <a class="clear" href="http://localhost:4000/search">
                    <i class="fa fa-search" aria-hidden="true"></i>
                </a>
            </li>
          
        
          
            <li class="separator"> | </li>
            <li>
                <a class="clear" href="http://localhost:4000/tags">
                    <i class="fa fa-tags" aria-hidden="true"></i>
                </a>
            </li>
          
        
    </ul>
        
	</nav>
</header>

    <div class="content">
      <article >
  <header id="main" style="background-image: url('/')">
    <h1 id="Git%E5%91%BD%E4%BB%A4" class="title">Git命令</h1>
    <p class="meta">
    November 13, 2017
    
    </p>
  </header>
  <section class="post-content"><p>我每天使用 Git ，但是很多命令记不住。</p>

<p>一般来说，日常使用只要记住下图6个命令，就可以了。但是熟练使用，恐怕要记住60～100个命令。</p>

<p><img src="http://www.ruanyifeng.com/blogimg/asset/2015/bg2015120901.png" alt="img" /></p>

<p>下面是我整理的常用 Git 命令清单。几个专用名词的译名如下。</p>

<ul>
  <li>Workspace：工作区</li>
  <li>Index / Stage：暂存区</li>
  <li>Repository：仓库区（或本地仓库）</li>
  <li>Remote：远程仓库</li>
</ul>

<h2 id="一新建代码库---git-init">一、新建代码库 - git init</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 在当前目录新建一个Git代码库</span>
 <span class="nv">$ </span>git init

 <span class="c"># 新建一个目录，将其初始化为Git代码库</span>
 <span class="nv">$ </span>git init <span class="o">[</span>project-name]

 <span class="c"># 下载一个项目和它的整个代码历史</span>
 <span class="nv">$ </span>git clone <span class="o">[</span>url]

</code></pre></div></div>

<h2 id="二配置-git-config">二、配置 git config</h2>

<p>Git的设置文件为<code class="highlighter-rouge">.gitconfig</code>，它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 显示当前的Git配置</span>
 <span class="nv">$ </span>git config <span class="nt">--list</span>

 <span class="c"># 编辑Git配置文件</span>
 <span class="nv">$ </span>git config <span class="nt">-e</span> <span class="o">[</span><span class="nt">--global</span><span class="o">]</span>

 <span class="c"># 设置提交代码时的用户信息</span>
 <span class="nv">$ </span>git config <span class="o">[</span><span class="nt">--global</span><span class="o">]</span> user.name <span class="s2">"[name]"</span>
 <span class="nv">$ </span>git config <span class="o">[</span><span class="nt">--global</span><span class="o">]</span> user.email <span class="s2">"[email address]"</span>

</code></pre></div></div>

<h2 id="三增加删除文件-git-addrm">三、增加/删除文件 git add/rm</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 添加指定文件到暂存区</span>
 <span class="nv">$ </span>git add <span class="o">[</span>file1] <span class="o">[</span>file2] ...

 <span class="c"># 添加指定目录到暂存区，包括子目录</span>
 <span class="nv">$ </span>git add <span class="o">[</span><span class="nb">dir</span><span class="o">]</span>

 <span class="c"># 添加当前目录的所有文件到暂存区</span>
 <span class="nv">$ </span>git add <span class="nb">.</span>

 <span class="c"># 添加每个变化前，都会要求确认</span>
 <span class="c"># 对于同一个文件的多处变化，可以实现分次提交</span>
 <span class="nv">$ </span>git add <span class="nt">-p</span>

 <span class="c"># 删除工作区文件，并且将这次删除放入暂存区</span>
 <span class="nv">$ </span>git <span class="nb">rm</span> <span class="o">[</span>file1] <span class="o">[</span>file2] ...

 <span class="c"># 停止追踪指定文件，但该文件会保留在工作区</span>
 <span class="nv">$ </span>git <span class="nb">rm</span> <span class="nt">--cached</span> <span class="o">[</span>file]

 <span class="c"># 改名文件，并且将这个改名放入暂存区</span>
 <span class="nv">$ </span>git <span class="nb">mv</span> <span class="o">[</span>file-original] <span class="o">[</span>file-renamed]

</code></pre></div></div>

<h2 id="四代码提交-git-commit">四、代码提交 git commit</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 提交暂存区到仓库区</span>
 <span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="o">[</span>message]

 <span class="c"># 提交暂存区的指定文件到仓库区</span>
 <span class="nv">$ </span>git commit <span class="o">[</span>file1] <span class="o">[</span>file2] ... <span class="nt">-m</span> <span class="o">[</span>message]

 <span class="c"># 提交工作区自上次commit之后的变化，直接到仓库区</span>
 <span class="nv">$ </span>git commit <span class="nt">-a</span>

 <span class="c"># 提交时显示所有diff信息</span>
 <span class="nv">$ </span>git commit <span class="nt">-v</span>

 <span class="c"># 使用一次新的commit，替代上一次提交</span>
 <span class="c"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span>
 <span class="nv">$ </span>git commit <span class="nt">--amend</span> <span class="nt">-m</span> <span class="o">[</span>message]

 <span class="c"># 重做上一次commit，并包括指定文件的新变化</span>
 <span class="nv">$ </span>git commit <span class="nt">--amend</span> <span class="o">[</span>file1] <span class="o">[</span>file2] ...

</code></pre></div></div>

<h2 id="五分支-git-branch">五、分支 git branch</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 列出所有本地分支</span>
 <span class="nv">$ </span>git branch

 <span class="c"># 列出所有远程分支</span>
 <span class="nv">$ </span>git branch <span class="nt">-r</span>

 <span class="c"># 列出所有本地分支和远程分支</span>
 <span class="nv">$ </span>git branch <span class="nt">-a</span>

 <span class="c"># 新建一个分支，但依然停留在当前分支</span>
 <span class="nv">$ </span>git branch <span class="o">[</span>branch-name]

 <span class="c"># 新建一个分支，并切换到该分支</span>
 <span class="nv">$ </span>git checkout <span class="nt">-b</span> <span class="o">[</span>branch]

 <span class="c"># 新建一个分支，指向指定commit</span>
 <span class="nv">$ </span>git branch <span class="o">[</span>branch] <span class="o">[</span>commit]

 <span class="c"># 新建一个分支，与指定的远程分支建立追踪关系</span>
 <span class="nv">$ </span>git branch <span class="nt">--track</span> <span class="o">[</span>branch] <span class="o">[</span>remote-branch]

 <span class="c"># 切换到指定分支，并更新工作区</span>
 <span class="nv">$ </span>git checkout <span class="o">[</span>branch-name]

 <span class="c"># 切换到上一个分支</span>
 <span class="nv">$ </span>git checkout -

 <span class="c"># 建立追踪关系，在现有分支与指定的远程分支之间</span>
 <span class="nv">$ </span>git branch <span class="nt">--set-upstream</span> <span class="o">[</span>branch] <span class="o">[</span>remote-branch]

 <span class="c"># 合并指定分支到当前分支</span>
 <span class="nv">$ </span>git merge <span class="o">[</span>branch]

 <span class="c"># 选择一个commit，合并进当前分支</span>
 <span class="nv">$ </span>git cherry-pick <span class="o">[</span>commit]

 <span class="c"># 删除分支</span>
 <span class="nv">$ </span>git branch <span class="nt">-d</span> <span class="o">[</span>branch-name]

 <span class="c"># 删除远程分支</span>
 <span class="nv">$ </span>git push origin <span class="nt">--delete</span> <span class="o">[</span>branch-name]
 <span class="nv">$ </span>git branch <span class="nt">-dr</span> <span class="o">[</span>remote/branch]

 <span class="c"># 拉取远端分支到本地，并创建本地分支</span>
 <span class="nv">$ </span>git pull origin develop:develop
</code></pre></div></div>

<h2 id="六标签-git-tag">六、标签 git tag</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 列出所有tag</span>
 <span class="nv">$ </span>git tag

 <span class="c"># 新建一个tag在当前commit</span>
 <span class="nv">$ </span>git tag <span class="o">[</span>tag]

 <span class="c"># 新建一个tag在指定commit</span>
 <span class="nv">$ </span>git tag <span class="o">[</span>tag] <span class="o">[</span>commit]

 <span class="c"># 删除本地tag</span>
 <span class="nv">$ </span>git tag <span class="nt">-d</span> <span class="o">[</span>tag]

 <span class="c"># 删除远程tag</span>
 <span class="nv">$ </span>git push origin :refs/tags/[tagName]

 <span class="c"># 查看tag信息</span>
 <span class="nv">$ </span>git show <span class="o">[</span>tag]

 <span class="c"># 提交指定tag</span>
 <span class="nv">$ </span>git push <span class="o">[</span>remote] <span class="o">[</span>tag]

 <span class="c"># 提交所有tag</span>
 <span class="nv">$ </span>git push <span class="o">[</span>remote] <span class="nt">--tags</span>

 <span class="c"># 新建一个分支，指向某个tag</span>
 <span class="nv">$ </span>git checkout <span class="nt">-b</span> <span class="o">[</span>branch] <span class="o">[</span>tag]
 

</code></pre></div></div>

<h2 id="七查看信息-git-status">七、查看信息 git status</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 显示有变更的文件</span>
 <span class="nv">$ </span>git status

 <span class="c"># 显示当前分支的版本历史</span>
 <span class="nv">$ </span>git log

 <span class="c"># 显示commit历史，以及每次commit发生变更的文件</span>
 <span class="nv">$ </span>git log <span class="nt">--stat</span>

 <span class="c"># 搜索提交历史，根据关键词</span>
 <span class="nv">$ </span>git log <span class="nt">-S</span> <span class="o">[</span>keyword]

 <span class="c"># 显示某个commit之后的所有变动，每个commit占据一行</span>
 <span class="nv">$ </span>git log <span class="o">[</span>tag] HEAD <span class="nt">--pretty</span><span class="o">=</span>format:%s

 <span class="c"># 显示某个commit之后的所有变动，其"提交说明"必须符合搜索条件</span>
 <span class="nv">$ </span>git log <span class="o">[</span>tag] HEAD <span class="nt">--grep</span> feature

 <span class="c"># 显示某个文件的版本历史，包括文件改名</span>
 <span class="nv">$ </span>git log <span class="nt">--follow</span> <span class="o">[</span>file]
 <span class="nv">$ </span>git whatchanged <span class="o">[</span>file]

 <span class="c"># 显示指定文件相关的每一次diff</span>
 <span class="nv">$ </span>git log <span class="nt">-p</span> <span class="o">[</span>file]

 <span class="c"># 显示过去5次提交</span>
 <span class="nv">$ </span>git log <span class="nt">-5</span> <span class="nt">--pretty</span> <span class="nt">--oneline</span>

 <span class="c"># 显示所有提交过的用户，按提交次数排序</span>
 <span class="nv">$ </span>git shortlog <span class="nt">-sn</span>

 <span class="c"># 显示指定文件是什么人在什么时间修改过</span>
 <span class="nv">$ </span>git blame <span class="o">[</span>file]

 <span class="c"># 显示暂存区和工作区的差异</span>
 <span class="nv">$ </span>git diff

 <span class="c"># 显示暂存区和上一个commit的差异</span>
 <span class="nv">$ </span>git diff <span class="nt">--cached</span> <span class="o">[</span>file]

 <span class="c"># 显示工作区与当前分支最新commit之间的差异</span>
 <span class="nv">$ </span>git diff HEAD

 <span class="c"># 显示两次提交之间的差异</span>
 <span class="nv">$ </span>git diff <span class="o">[</span>first-branch]...[second-branch]

 <span class="c"># 显示今天你写了多少行代码</span>
 <span class="nv">$ </span>git diff <span class="nt">--shortstat</span> <span class="s2">"@{0 day ago}"</span>

 <span class="c"># 显示某次提交的元数据和内容变化</span>
 <span class="nv">$ </span>git show <span class="o">[</span>commit]

 <span class="c"># 显示某次提交发生变化的文件</span>
 <span class="nv">$ </span>git show <span class="nt">--name-only</span> <span class="o">[</span>commit]

 <span class="c"># 显示某次提交时，某个文件的内容</span>
 <span class="nv">$ </span>git show <span class="o">[</span>commit]:[filename]

 <span class="c"># 显示当前分支的最近几次提交</span>
 <span class="nv">$ </span>git reflog

</code></pre></div></div>

<h2 id="八远程同步">八、远程同步</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 下载远程仓库的所有变动</span>
 <span class="nv">$ </span>git fetch <span class="o">[</span>remote]

 <span class="c"># 显示所有远程仓库</span>
 <span class="nv">$ </span>git remote <span class="nt">-v</span>

 <span class="c"># 显示某个远程仓库的信息</span>
 <span class="nv">$ </span>git remote show <span class="o">[</span>remote]

 <span class="c"># 增加一个新的远程仓库，并命名</span>
 <span class="nv">$ </span>git remote add <span class="o">[</span>shortname] <span class="o">[</span>url]

 <span class="c"># 取回远程仓库的变化，并与本地分支合并</span>
 <span class="nv">$ </span>git pull <span class="o">[</span>remote] <span class="o">[</span>branch]

 <span class="c"># 上传本地指定分支到远程仓库</span>
 <span class="nv">$ </span>git push <span class="o">[</span>remote] <span class="o">[</span>branch]

 <span class="c"># 强行推送当前分支到远程仓库，即使有冲突</span>
 <span class="nv">$ </span>git push <span class="o">[</span>remote] <span class="nt">--force</span>

 <span class="c"># 推送所有分支到远程仓库</span>
 <span class="nv">$ </span>git push <span class="o">[</span>remote] <span class="nt">--all</span>

</code></pre></div></div>

<h2 id="九撤销">九、撤销</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 恢复暂存区的指定文件到工作区</span>
 <span class="nv">$ </span>git checkout <span class="o">[</span>file]

 <span class="c"># 恢复某个commit的指定文件到暂存区和工作区</span>
 <span class="nv">$ </span>git checkout <span class="o">[</span>commit] <span class="o">[</span>file]

 <span class="c"># 恢复暂存区的所有文件到工作区</span>
 <span class="nv">$ </span>git checkout <span class="nb">.</span>

 <span class="c"># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span>
 <span class="nv">$ </span>git reset <span class="o">[</span>file]

 <span class="c"># 重置暂存区与工作区，与上一次commit保持一致</span>
 <span class="nv">$ </span>git reset <span class="nt">--hard</span>

 <span class="c"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span>
 <span class="nv">$ </span>git reset <span class="o">[</span>commit]

 <span class="c"># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span>
 <span class="nv">$ </span>git reset <span class="nt">--hard</span> <span class="o">[</span>commit]

 <span class="c"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span>
 <span class="nv">$ </span>git reset <span class="nt">--keep</span> <span class="o">[</span>commit]

 <span class="c"># 新建一个commit，用来撤销指定commit</span>
 <span class="c"># 后者的所有变化都将被前者抵消，并且应用到当前分支</span>
 <span class="nv">$ </span>git revert <span class="o">[</span>commit]

 <span class="c"># 暂时将未提交的变化移除，稍后再移入</span>
 <span class="nv">$ </span>git stash
 <span class="nv">$ </span>git stash pop

</code></pre></div></div>

<h2 id="十克隆-git-clone">十、克隆 git clone</h2>

<p>远程操作的第一步，通常是从远程主机克隆一个版本库，这时就要用到<code class="highlighter-rouge">git clone</code>命令。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone &lt;版本库的网址
</code></pre></div></div>

<p>比如，克隆jQuery的版本库。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git clone https://github.com/jquery/jquery.git
</code></pre></div></div>

<p>该命令会在本地主机生成一个目录，与远程主机的版本库同名。如果要指定不同的目录名，可以将目录名作为<code class="highlighter-rouge">git clone</code>命令的第二个参数。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git clone &lt;版本库的网址 &lt;本地目录名
</code></pre></div></div>

<p><code class="highlighter-rouge">git clone</code>支持多种协议，除了HTTP(s)以外，还支持SSH、Git、本地文件协议等，下面是一些例子。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git clone http[s]://example.com/path/to/repo.git/
 <span class="nv">$ </span>git clone ssh://example.com/path/to/repo.git/
 <span class="nv">$ </span>git clone git://example.com/path/to/repo.git/
 <span class="nv">$ </span>git clone /opt/git/project.git 
 <span class="nv">$ </span>git clone file:///opt/git/project.git
 <span class="nv">$ </span>git clone ftp[s]://example.com/path/to/repo.git/
 <span class="nv">$ </span>git clone rsync://example.com/path/to/repo.git/
</code></pre></div></div>

<p>SSH协议还有另一种写法。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git clone <span class="o">[</span>user@]example.com:path/to/repo.git/
</code></pre></div></div>

<p>通常来说，Git协议下载速度最快，SSH协议用于需要用户认证的场合。各种协议优劣的详细讨论请参考<a href="http://git-scm.com/book/en/Git-on-the-Server-The-Protocols">官方文档</a>。</p>

<h2 id="十一远程-git-remote">十一、远程 git remote</h2>

<p>为了便于管理，Git要求每个远程主机都必须指定一个主机名。<code class="highlighter-rouge">git remote</code>命令就用于管理主机名。</p>

<p>不带选项的时候，<code class="highlighter-rouge">git remote</code>命令列出所有远程主机。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git remote origin
</code></pre></div></div>

<p>使用<code class="highlighter-rouge">-v</code>选项，可以参看远程主机的网址。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git remote <span class="nt">-v</span>
 origin  git@github.com:jquery/jquery.git <span class="o">(</span>fetch<span class="o">)</span>
 origin  git@github.com:jquery/jquery.git <span class="o">(</span>push<span class="o">)</span>
</code></pre></div></div>

<p>上面命令表示，当前只有一台远程主机，叫做origin，以及它的网址。</p>

<p>克隆版本库的时候，所使用的远程主机自动被Git命名为<code class="highlighter-rouge">origin</code>。如果想用其他的主机名，需要用<code class="highlighter-rouge">git clone</code>命令的<code class="highlighter-rouge">-o</code>选项指定。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git clone <span class="nt">-o</span> jQuery https://github.com/jquery/jquery.git
 <span class="nv">$ </span>git remote jQuery
</code></pre></div></div>

<p>上面命令表示，克隆的时候，指定远程主机叫做jQuery。</p>

<p><code class="highlighter-rouge">git remote show</code>命令加上主机名，可以查看该主机的详细信息。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git remote show &lt;主机名
</code></pre></div></div>

<p><code class="highlighter-rouge">git remote add</code>命令用于添加远程主机。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git remote add &lt;主机名 &lt;网址
</code></pre></div></div>

<p><code class="highlighter-rouge">git remote rm</code>命令用于删除远程主机。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git remote <span class="nb">rm</span> &lt;主机名
</code></pre></div></div>

<p><code class="highlighter-rouge">git remote rename</code>命令用于远程主机的改名。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git remote rename &lt;原主机名 &lt;新主机名
</code></pre></div></div>

<p>尝试删除本地版本库上那些失效的远程追踪分支</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote prune origin <span class="nt">--dry-run</span>
</code></pre></div></div>

<p>删除本地版本库上那些失效的远程追踪分支</p>

<pre><code class="language-SHELL">git remote prune origin 
</code></pre>

<h2 id="十二git-fetch">十二、git fetch</h2>

<p>一旦远程主机的版本库有了更新（Git术语叫做commit），需要将这些更新取回本地，这时就要用到<code class="highlighter-rouge">git fetch</code>命令。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git fetch &lt;远程主机名

</code></pre></div></div>

<p>上面命令将某个远程主机的更新，全部取回本地。</p>

<p><code class="highlighter-rouge">git fetch</code>命令通常用来查看其他人的进程，因为它取回的代码对你本地的开发代码没有影响。</p>

<p>默认情况下，<code class="highlighter-rouge">git fetch</code>取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git fetch &lt;远程主机名 &lt;分支名

</code></pre></div></div>

<p>比如，取回<code class="highlighter-rouge">origin</code>主机的<code class="highlighter-rouge">master</code>分支。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git fetch origin master

</code></pre></div></div>

<p>所取回的更新，在本地主机上要用”远程主机名/分支名”的形式读取。比如<code class="highlighter-rouge">origin</code>主机的<code class="highlighter-rouge">master</code>，就要用<code class="highlighter-rouge">origin/master</code>读取。</p>

<p><code class="highlighter-rouge">git branch</code>命令的<code class="highlighter-rouge">-r</code>选项，可以用来查看远程分支，<code class="highlighter-rouge">-a</code>选项查看所有分支。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git branch <span class="nt">-r</span>
 origin/master

 <span class="nv">$ </span>git branch <span class="nt">-a</span>
 <span class="k">*</span> master
   remotes/origin/master

</code></pre></div></div>

<p>上面命令表示，本地主机的当前分支是<code class="highlighter-rouge">master</code>，远程分支是<code class="highlighter-rouge">origin/master</code>。</p>

<p>取回远程主机的更新以后，可以在它的基础上，使用<code class="highlighter-rouge">git checkout</code>命令创建一个新的分支。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git checkout <span class="nt">-b</span> newBrach origin/master

</code></pre></div></div>

<p>上面命令表示，在<code class="highlighter-rouge">origin/master</code>的基础上，创建一个新分支。</p>

<p>此外，也可以使用<code class="highlighter-rouge">git merge</code>命令或者<code class="highlighter-rouge">git rebase</code>命令，在本地分支上合并远程分支。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git merge origin/master
 <span class="c"># 或者</span>
 <span class="nv">$ </span>git rebase origin/master

</code></pre></div></div>

<p>上面命令表示在当前分支上，合并<code class="highlighter-rouge">origin/master</code>。</p>

<h2 id="十三git-pull">十三、git pull</h2>

<p><code class="highlighter-rouge">git pull</code>命令的作用是，取回远程主机某个分支的更新，再与本地的指定分支合并。它的完整格式稍稍有点复杂。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull &lt;远程主机名 &lt;远程分支名:&lt;本地分支名

</code></pre></div></div>

<p>比如，取回<code class="highlighter-rouge">origin</code>主机的<code class="highlighter-rouge">next</code>分支，与本地的<code class="highlighter-rouge">master</code>分支合并，需要写成下面这样。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull origin next:master

</code></pre></div></div>

<p>如果远程分支是与当前分支合并，则冒号后面的部分可以省略。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull origin next

</code></pre></div></div>

<p>上面命令表示，取回<code class="highlighter-rouge">origin/next</code>分支，再与当前分支合并。实质上，这等同于先做<code class="highlighter-rouge">git fetch</code>，再做<code class="highlighter-rouge">git merge</code>。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git fetch origin
 <span class="nv">$ </span>git merge origin/next

</code></pre></div></div>

<p>在某些场合，Git会自动在本地分支与远程分支之间，建立一种追踪关系（tracking）。比如，在<code class="highlighter-rouge">git clone</code>的时候，所有本地分支默认与远程主机的同名分支，建立追踪关系，也就是说，本地的<code class="highlighter-rouge">master</code>分支自动”追踪”<code class="highlighter-rouge">origin/master</code>分支。</p>

<p>Git也允许手动建立追踪关系。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git branch <span class="nt">--set-upstream</span> master origin/next

</code></pre></div></div>

<p>上面命令指定<code class="highlighter-rouge">master</code>分支追踪<code class="highlighter-rouge">origin/next</code>分支。</p>

<p>如果当前分支与远程分支存在追踪关系，<code class="highlighter-rouge">git pull</code>就可以省略远程分支名。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull origin

</code></pre></div></div>

<p>上面命令表示，本地的当前分支自动与对应的<code class="highlighter-rouge">origin</code>主机”追踪分支”（remote-tracking branch）进行合并。</p>

<p>如果当前分支只有一个追踪分支，连远程主机名都可以省略。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull

</code></pre></div></div>

<p>上面命令表示，当前分支自动与唯一一个追踪分支进行合并。</p>

<p>如果合并需要采用rebase模式，可以使用<code class="highlighter-rouge">--rebase</code>选项。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull <span class="nt">--rebase</span> &lt;远程主机名 &lt;远程分支名:&lt;本地分支名

</code></pre></div></div>

<p>如果远程主机删除了某个分支，默认情况下，<code class="highlighter-rouge">git pull</code> 不会在拉取远程分支的时候，删除对应的本地分支。这是为了防止，由于其他人操作了远程主机，导致<code class="highlighter-rouge">git pull</code>不知不觉删除了本地分支。</p>

<p>但是，你可以改变这个行为，加上参数 <code class="highlighter-rouge">-p</code> 就会在本地删除远程已经删除的分支。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git pull <span class="nt">-p</span>
 <span class="c"># 等同于下面的命令</span>
 <span class="nv">$ </span>git fetch <span class="nt">--prune</span> origin 
 <span class="nv">$ </span>git fetch <span class="nt">-p</span>

</code></pre></div></div>

<h2 id="十四git-push">十四、git push</h2>

<p><code class="highlighter-rouge">git push</code>命令用于将本地分支的更新，推送到远程主机。它的格式与<code class="highlighter-rouge">git pull</code>命令相仿。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;
</code></pre></div></div>

<p>注意，分支推送顺序的写法是&lt;来源地:&lt;目的地，所以<code class="highlighter-rouge">git pull</code>是&lt;远程分支:&lt;本地分支，而<code class="highlighter-rouge">git push</code>是&lt;本地分支:&lt;远程分支。</p>

<p>如果省略远程分支名，则表示将本地分支推送与之存在”追踪关系”的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push origin master
</code></pre></div></div>

<p>上面命令表示，将本地的<code class="highlighter-rouge">master</code>分支推送到<code class="highlighter-rouge">origin</code>主机的<code class="highlighter-rouge">master</code>分支。如果后者不存在，则会被新建。</p>

<p>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push origin :master
 <span class="c"># 等同于</span>
 <span class="nv">$ </span>git push origin <span class="nt">--delete</span> master
</code></pre></div></div>

<p>上面命令表示删除<code class="highlighter-rouge">origin</code>主机的<code class="highlighter-rouge">master</code>分支。</p>

<p>如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push origin
</code></pre></div></div>

<p>上面命令表示，将当前分支推送到<code class="highlighter-rouge">origin</code>主机的对应分支。</p>

<p>如果当前分支只有一个追踪分支，那么主机名都可以省略。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push
</code></pre></div></div>

<p>如果当前分支与多个主机存在追踪关系，则可以使用<code class="highlighter-rouge">-u</code>选项指定一个默认主机，这样后面就可以不加任何参数使用<code class="highlighter-rouge">git push</code>。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push <span class="nt">-u</span> origin master
</code></pre></div></div>

<p>上面命令将本地的<code class="highlighter-rouge">master</code>分支推送到<code class="highlighter-rouge">origin</code>主机，同时指定<code class="highlighter-rouge">origin</code>为默认主机，后面就可以不加任何参数使用<code class="highlighter-rouge">git push</code>了。</p>

<p>不带任何参数的<code class="highlighter-rouge">git push</code>，默认只推送当前分支，这叫做simple方式。此外，还有一种matching方式，会推送所有有对应的远程分支的本地分支。Git 2.0版本之前，默认采用matching方法，现在改为默认采用simple方式。如果要修改这个设置，可以采用<code class="highlighter-rouge">git config</code>命令。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git config <span class="nt">--global</span> push.default matching
 <span class="c"># 或者</span>
 <span class="nv">$ </span>git config <span class="nt">--global</span> push.default simple
</code></pre></div></div>

<p>还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<code class="highlighter-rouge">--all</code>选项。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push <span class="nt">--all</span> origin
</code></pre></div></div>

<p>上面命令表示，将所有本地分支都推送到<code class="highlighter-rouge">origin</code>主机。</p>

<p>如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做<code class="highlighter-rouge">git pull</code>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<code class="highlighter-rouge">--force</code>选项。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push <span class="nt">--force</span> origin 
</code></pre></div></div>

<p>上面命令使用<code class="highlighter-rouge">--force</code>选项，结果导致远程主机上更新的版本被覆盖。除非你很确定要这样做，否则应该尽量避免使用<code class="highlighter-rouge">--force</code>选项。</p>

<p>最后，<code class="highlighter-rouge">git push</code>不会推送标签（tag），除非使用<code class="highlighter-rouge">--tags</code>选项。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>git push origin <span class="nt">--tags</span>
</code></pre></div></div>

<h2 id="十五子模块-git-submodule">十五、子模块 git submodule</h2>

<h3 id="1-添加子模块">1. 添加子模块</h3>

<p>进入 <code class="highlighter-rouge">MainProject</code> 使用 <strong>git submodule add</strong> 进行添加,操作命令：</p>

<pre><code class="language-Shell">git clone https://github.com/imtianx/MainProject.git
cd MainProject/
git submodule add https://github.com/imtianx/liba.git
git submodule add https://github.com/imtianx/libb.git
</code></pre>

<p>添加 <code class="highlighter-rouge">liba</code> <code class="highlighter-rouge">libb</code> 子模块。 <code class="highlighter-rouge">.gitmodules</code> 中存放的为子模块的信息，使用 <code class="highlighter-rouge">cat</code> 或 <code class="highlighter-rouge">vim</code> 查看内容为：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[submodule "liba"]
	path = liba
	url = https://github.com/imtianx/liba.git
[submodule "libb"]
	path = libb
	url = https://github.com/imtianx/libb.git

</code></pre></div></div>

<blockquote>
  <p><strong>.gitmodules文件</strong>：保存项目 URL 与已经拉取的本地目录之间的映射，有多个子模块则含有多条记录，会随着版本控制一起被拉去和推送的。</p>
</blockquote>

<p>此时文件目录树如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── README.md
├── liba
│   ├── README.md
│   ├── a.txt
│   └── a2.txt
├── libb
│   ├── README.md
│   ├── b.txt
│   └── b2.txt
└── test.text


</code></pre></div></div>

<p>最后，<strong>提交添加的子模块到主目录</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git commit -m "add liba and libb submodules"
[master 6b15e30] add liba and libb submodules
 3 files changed, 8 insertions(+)
 create mode 100644 .gitmodules
 create mode 160000 liba
 create mode 160000 libb

</code></pre></div></div>

<h3 id="2-更新子模块">2. 更新子模块</h3>

<p>往往子模块是单独开发的，这里以更新 <code class="highlighter-rouge">liba</code> 为例（为了测试，这里先在liba仓库添加了一个文件）：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd liba/
git fetch
git merge origin/master

</code></pre></div></div>

<p>此外，还可以在主目录下 直接用下面的命令更新 <code class="highlighter-rouge">libb</code>子模块：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule update --remote liba
</code></pre></div></div>

<p><strong>使用下面的方式，更新所有子模块：</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule update --remote
</code></pre></div></div>

<h3 id="3-删除子模块">3. 删除子模块</h3>

<p>在日常开发中，有添加，当然也会有删除 子模块的需求。 这里主项目包含两个子模块：<code class="highlighter-rouge">liba</code>、<code class="highlighter-rouge">libb</code>，以删除 <code class="highlighter-rouge">liba</code> 为例说明：</p>

<ul>
  <li>使用 <code class="highlighter-rouge">git rm --cached liba</code> 将liba 从版本控制中删除（本地仍保留有），若不需要可不带 <code class="highlighter-rouge">--cached</code>进行完全删除。</li>
  <li>使用 <code class="highlighter-rouge">vim .gitmodules</code> 可打开vim编辑,删除对应的内容</li>
</ul>

<pre><code class="language-Shell"> [submodule "liba"]
          path = liba
          url = https://github.com/imtianx/liba.git
          branch = dev
</code></pre>

<ul>
  <li>使用 <code class="highlighter-rouge">vim .git/config</code> 可打开vim编辑,删除对应的内容</li>
</ul>

<pre><code class="language-Shell">[submodule "liba"]
         url = https://github.com/imtianx/liba.git
         active = true
</code></pre>

<ul>
  <li>使用 <code class="highlighter-rouge">rm -rf .git/modules/liba</code>, 删除.git下的缓存模块，最后提交项目。</li>
</ul>

<p>经过上面的删除后还可以进行添加子模块。</p>

<h3 id="4-克隆含子模块的仓库">4. 克隆含子模块的仓库</h3>

<p>若需要克隆含有子模块的仓库，直接 进行克隆是无法拉取之模块的代码，可加上 <strong>–recursive</strong>参数，如下：</p>

<pre><code class="language-Shell">git clone --recursive https://github.com/imtianx/MainProject.git
</code></pre>

<p>或者使用下面的三部操作：</p>

<pre><code class="language-Shell">git clone  https://github.com/imtianx/MainProject.git
git submodule init
git submodule update
</code></pre>

<h2 id="十五其他">十五、其他</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c"># 生成一个可供发布的压缩包</span>
 <span class="nv">$ </span>git archive
</code></pre></div></div>

<h1 id="git-错误解决方法">git 错误解决方法</h1>

<p>错误：</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">error</span><span class="o">:</span> <span class="n">RPC</span> <span class="n">failed</span><span class="o">;</span> <span class="n">curl</span> <span class="mi">18</span> <span class="n">transfer</span> <span class="n">closed</span> <span class="k">with</span> <span class="n">outstanding</span> <span class="n">read</span> <span class="n">data</span> <span class="n">remaining</span>

<span class="nl">fatal:</span> <span class="n">The</span> <span class="n">remote</span> <span class="k">end</span> <span class="n">hung</span> <span class="n">up</span> <span class="n">unexpectedly</span>

<span class="nl">fatal:</span> <span class="n">early</span> <span class="n">EOF</span>

<span class="nl">fatal:</span> <span class="n">index</span><span class="o">-</span><span class="n">pack</span> <span class="n">failed</span>

</code></pre></div></div>

<p>解决办法：</p>

<p>修改Git的传输字节限制即可。</p>

<p># git config –global http.postBuffer  524288000</p>
</section>
  
  <!-- Social media shares -->
  <div class="share-buttons">
    <ul class="share-buttons">
        <div class="meta"></div>
                 
    </ul>
</div>
   
   <!-- Tag list -->
  
  


<footer>
  <div class="tag-list">
    
    <a class="button" href="/tags#Git">
      <p><i class="fa fa-tag fa-fw"></i> Git</p>
    </a>
    
  </div>
</footer>

    
</article>

<!-- Disqus -->


<!-- Post navigation -->

  <div id="post-nav">
  
  <div id="previous-post" class="post-nav-post">
      <p>Previous post</p>
      <a href="/2014/11/30/sample-post.html">
        Sample post
      </a>
  </div>
  
  
  <div id="next-post" class="post-nav-post">
      <p>Next post</p>
      <a href="/2018/07/09/zsh-git-%E5%BF%AB%E6%8D%B7%E9%94%AE.html">
        zsh git的快捷键
      </a>
  </div>
  
</div>

    </div>
    
<footer class="site-footer">
    <p class="text">Copyright © <a href="https://qiaoshouliang.github.io/">Josen</a> 2018
</p>
            <div class="footer-icons">
                <ul>
                <!-- Social icons from Font Awesome, if enabled -->
                


<li>
	<a href="mailto:qiaoshouliang@126.com" title="Email">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>













<li>
	<a href="https://github.com/https://github.com/qiaoshouliang" title="Follow on GitHub">
		<span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
        </span>
	</a>
</li>
































                </ul>
            </div>
</footer>




  </body>
</html>
